<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>

</style>
</head>
<body>
<a href="/index.html">홈페이지이동</a>
<h1>상영스케줄등록</h1>
<form>
날짜 선택<input type="date" name="screenSchedule_date" >
등록할 영화관이름<select id="movieTheaName" name="movieTheater_name"  onchange="categoryChange(this)">
	<option>--영화관을 선택하세요.--</option>
	<option th:each="mTLst : ${mTLst}" th:value="${mTLst.movieTheater_name}" th:utext="${mTLst.movieTheater_name}"></option>
	</select>

<select id="good">
<option>좋아하는 멤버를 선택해주세요</option>
</select>
<input onclick="slctMviTheaBtnClick()" type="button" id="MviTheaBtn" value="찾기">
</form>



<script>
function categoryChange(e) {
	var selecName = $('#movieTheaName').val();
	console.log(selecName);
	
	$.ajax({
		type: "GET",
		url: "/screenSchedule/movieNameSend",
		data: {
			'movieTheaName': selecName
		},
		error : function(XMLHttpRequest, textStatus, errorThrown){ // 비동기 통신이 실패할경우 error 콜백으로 들어옵니다.
            alert("통신 실패.")
        },
        success : function(res){ // 비동기통신의 성공일경우 success콜백으로 들어옵니다. 'res'는 응답받은 데이터이다.
            // 응답코드 > 0000
            alert(res);
        }
	});
	
	
	var good_a = ["지수", "제니", "로제", "리사"];
	var good_b = ["빅토리아", "엠버", "루나", "크리스탈"];
	var good_c = ["LE", "하니", "정화", "혜린", "솔지"];
	var target = document.getElementById("good");
	
	if(e.value == "메가박스_인천당하점") var d = good_a;
	else if(e.value == "메가박스_인천원당점") var d = good_b;

	target.options.length = 0;

	for (x in d) {
		var opt = document.createElement("option");
		opt.value = d[x];
		opt.innerHTML = d[x];
		target.appendChild(opt);
	}	
}
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
</body>
</html>